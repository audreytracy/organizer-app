{%load static%}
<div class="container">
    <div class="row">
        <div class="nav-buttons">
            <a href="{% url 'monthly-calendar' %}?year={{ prev_year }}&month={{ prev_month }}">&lt;&lt; Previous month </a>
            <h1>{{ month_name }} {{ year }}</h1>
            <a href="{% url 'monthly-calendar' %}?year={{ next_year }}&month={{ next_month }}"> Next month &gt;&gt;</a>
        </div>
            <select id="calendar-view">
                <option value="yearly">Yearly calendar</option>
                <option value="monthly">Monthly calendar</option>
                <option value="weekly" selected>Weekly calendar</option>
            </select>
        </div>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th scope="col" class="text-center">Sun</th>
                <th scope="col" class="text-center">Mon</th>
                <th scope="col" class="text-center">Tue</th>
                <th scope="col" class="text-center">Wed</th>
                <th scope="col" class="text-center">Thu</th>
                <th scope="col" class="text-center">Fri</th>
                <th scope="col" class="text-center">Sat</th>
            </tr>
            </thead>
            <tbody>
            {% for week in weeks %}
            <tr>
                {% for day in week %}
                <td class="text-center {% if day.month != month %}text-muted{% endif %} {% if day == today %}bg-primary text-white{% endif %}">
                {% if day.month == month %}
                {{ day.day }}
                {% endif %}
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
            </tbody>
        </table>
        </div>
    </div>
</div>

<style>
    table {
    width: 120%;
    table-layout: fixed;
}

.nav-buttons {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 1rem 0;
}


td {
    width: 14.285%;
    text-align: center;
    vertical-align: middle;
    border: 1px solid black;
}
</style>

<script>
    const calendarView = document.getElementById('calendar-view');
    calendarView.addEventListener('change', function() {
        const selectedView = calendarView.value;
        if (selectedView === 'yearly') {
            window.location.href = '#';
        } else if (selectedView === 'weekly') {
            window.location.href = "{% url 'weekly_calendar' acct_id=acct_id %}";
        }
    });
</script>